{% extends "base.html" %}
{% block content %}
<div class="main-container">
    <div class="container">
        <h1 class="title">Confesiones An√≥nimas</h1>

        <button class="btn-floating" id="btn-new-conf">+</button>

        <a href="{{ url_for('inicio') }}" class="btn-home">
            üè† Inicio
        </a>
        <div class="modal" id="modal">
            <div class="modal-content">
                <span class="close" id="modal-close">&times;</span>
                <form action="{{ url_for('confesiones') }}" method="POST" enctype="multipart/form-data" id="form-confesion">
                    <textarea name="texto" placeholder="Escribe tu confesi√≥n..." required></textarea>
                    <input type="file" name="media" accept="image/*,audio/*">
                    <div class="color-picker-container">
                        <label>Color de fondo:</label>
                        <input type="color" name="color" value="#ffffff">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-cancel" id="btn-descartar">‚úñ Descartar</button>
                        <button type="submit" class="btn-submit">Publicar</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="filters">
            <button onclick="cargarFiltro('nuevas')" class="btn-filter">üÜï Nuevas</button>
            <button onclick="cargarFiltro('populares')" class="btn-filter">üî• Populares</button>
            <button onclick="cargarFiltro('aleatorio')" class="btn-filter">üé≤ Aleatorio</button>
        </div>

        <div id="contenedor-confesiones" class="confesiones-grid">
            {% for conf in confesiones %}
            {% include "confesiones_card.html" %}
            {% endfor %}
        </div>
        <div id="loading" class="loading-message" style="display:none;">Cargando m√°s confesiones...</div>
    </div>
</div>

<link rel="stylesheet" href="{{ url_for('static', filename='css/confesiones.css') }}">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{{ url_for('static', filename='js/confesiones.js') }}"></script>

<style>
    /* Estilos globales y reset */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #FAFAFA; color: #262626; min-height: 100vh; }
    .container { max-width: 600px; margin: auto; padding: 20px; }
    .main-container { background-color: #FAFAFA; min-height: 100vh; padding: 20px; }
    .title { text-align: center; font-size: 2.5rem; color: #E1306C; margin-bottom: 2rem; }
    /* Bot√≥n flotante para publicar */
    .btn-floating { position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; border-radius: 50%; background-color: #E1306C; color: white; font-size: 2.5rem; line-height: 60px; text-align: center; border: none; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15); cursor: pointer; z-index: 1001; transition: transform 0.2s ease; }
    .btn-floating:hover { transform: scale(1.1); background-color: #C13584; }
    /* Bot√≥n de inicio */
    .btn-home { position: fixed; bottom: 90px; right: 20px; z-index: 1001; background: #E1306C; color: white; padding: 10px 15px; border-radius: 8px; text-decoration: none; font-weight: bold; transition: background-color 0.2s ease; }
    .btn-home:hover { background: #C13584; }
    /* Modal de publicaci√≥n */
    .modal { display: none; position: fixed; z-index: 1002; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); padding-top: 60px; }
    .modal-content { background-color: #FFFFFF; margin: 5% auto; padding: 20px; border: 1px solid #DBDBDB; border-radius: 15px; max-width: 500px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); }
    .close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
    .close:hover, .close:focus { color: #E1306C; text-decoration: none; }
    form textarea { width: 100%; height: 120px; background-color: #F8F8F8; color: #262626; border: 1px solid #DBDBDB; border-radius: 8px; padding: 10px; resize: none; font-size: 16px; margin-bottom: 10px; }
    form input[type="file"] { margin-top: 10px; color: #E1306C; background: #F8F8F8; border: 1px solid #DBDBDB; padding: 8px; border-radius: 8px; width: 100%; }
    .color-picker-container { display: flex; align-items: center; justify-content: space-between; margin-top: 10px; }
    .color-picker-container label { color: #737373; margin-right: 10px; }
    form input[type="color"] { width: 50%; height: 40px; border: 1px solid #DBDBDB; border-radius: 8px; cursor: pointer; }
    .form-actions { display: flex; justify-content: space-between; margin-top: 20px; }
    .btn-cancel, .btn-submit { padding: 10px 20px; border: none; border-radius: 8px; font-weight: bold; text-decoration: none; color: white; cursor: pointer; transition: background-color 0.2s ease; }
    .btn-cancel { background: #E91E63; }
    .btn-submit { background: #E1306C; }
    .btn-cancel:hover { background: #D81B60; }
    .btn-submit:hover { background: #C13584; }
    /* Filtros */
    .filters { margin-top: 20px; text-align: center; }
    .btn-filter { background: #FFFFFF; border: 1px solid #DBDBDB; color: #E1306C; padding: 8px 15px; border-radius: 8px; cursor: pointer; margin: 5px; }
    .btn-filter:hover { background-color: #EFEFEF; }
    /* Mensaje de carga */
    .loading-message { text-align: center; margin: 20px; color: #737373; font-size: 1.2em; }
</style>
{% endblock %}